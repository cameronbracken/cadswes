# CRSS Powell Rules

## 1 - Compute 602a Storage
	ASSIGN TO $ "EqualizationData.value602a" [@"24:00:00 December 31, Current Year"]
		602aStorage
			AnnualMinObjectiveRelease
			ShortedUBDepletion
				CriticalPeriodUBDepletion
				
## 2 - Compute 70R Assurance Level Surplus Volume
	ASSIGN TO $ "Surplus.SurplusRelease" []
		ComputeInflowAtProbability
			GetDenominator
				GetT
			GetNumerator
				GetT
			GetT
		SumLBDemands
			AnnualEvaporation
				EstimateEvaporation
					SumEvapCoeff
				RuleCurveStorage
			SumDemandsDownstreamOfPowell
				AnnualVolume
				SumDepletionsBelowVolume
				TotalOtherPriority4ScheduledUse
					MakeSlotNameAggDiv
					MakeSlotNameWaterUser
						GetSlotNameForScheduleWaterUser
					OtherArizonaPriority4UsersAggDivSite
					OtherArizonaPriority4UsersWaterUser
				TotalPriority2and3ScheduledUse
					ArizonaPriority2and3UsersWaterUser
					MakeSlotNameWaterUserPriority2and3
						GetSlotNameForScheduleWaterUser
		SumPreviousYearICSCredits
			PreviousYearBankBalance
		SumUBDemands
		SurplusMaxStorage
			LiveCapacity
			
## 3 - Powell Forecast Error
	ASSIGN TO $ "MeadFloodControlData.PowellForecastError" []
		ComputePowellForecastError
			ComputeInitialPowellForecastError
				GetPreviousForecastError
				RegressionCoefficient
				SetRandomDeviation
					GetRandSeed
	ASSIGN TO $ "PowellForecastData.forecastError" []
		ComputePowellForecastError
			ComputeInitialPowellForecastError
				GetPreviousForecastError
				RegressionCoefficient
				SetRandomDeviation
					GetRandSeed
	ASSIGN TO $ "PowellForecastData.random" []
		SetRandomDeviation
			GetRandSeed
			
## 4 - Powell Runoff Forecast
	ASSIGN TO $ "PowellForecastData.Natural Inflow with Error" []
	ASSIGN TO $ "PowellForecastData.Reg Inflow with Error" []
		UBDepletionsRange
		UBEffectiveStorage
			AvailableSpace
				LiveCapacity
	ASSIGN TO $ "PowellForecastData.Unreg Inflow with Error" []
		UBDepletionsRange
		
## 5 - EOWYStorageForecasts
	ASSIGN TO $ "EqualizationData.ForecastEOWYSMead" []
		EOWYStorage
			EstimateBankStorage
				EstimateEvaporation
					SumEvapCoeff
				LiveCapacity
			EstimateEvaporation
				SumEvapCoeff
			InactiveCapacity
			InitialEOWYStorageMead
				PreviousStorage
			InitialEOWYStoragePowell
				ForecastPowellInflow
					PowellRegulatedInflowVolume
						PowellNaturalInflowVolume
						UBDepletionsRange
						UBRegulation
							UBDrawDown
								UBInitialStorage
									UBTargetStorage
								UBTargetStorage
				PreviousStorage
			LiveCapacity
			PreviousStorage
		ForecastMeadRelease
			ComputeEqualizationEvaporation
				EstimateEvaporation
					SumEvapCoeff
				RuleCurveStorage
			EqualizationRuleCurveStorage
				PreviousStorage
				RuleCurveStorage
			SumDemandsDownstreamofMead
				SumDepletionsBelowVolume
				TotalOtherPriority4ActualUse
				TotalPriority2and3ActualUse
			SumInflowBelowMead
		ForecastPowellRelease
			ForecastPowellFallRangeOutflowVolume
				MaxReleaseVolume
					MaxRelease
				MinReleaseVolume
					MinRelease
				PowellFallOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					PowellRegulatedInflowVolume
						PowellNaturalInflowVolume
						UBDepletionsRange
						UBRegulation
							UBDrawDown
								UBInitialStorage
									UBTargetStorage
								UBTargetStorage
					UBTargetStorage
				PowellMinObjRelVolumeFall
					ComputeScheduledMinObjRelRemainingThruSept
					PowellMinObjRelVolRemaining
						AnnualMinObjectiveRelease
						ReleaseMade
							PowellFallRelease
				PowellSumReleaseWeights
			ForecastPowellJulyStorage
				Estimate Bank Storage without Evap
				EstimateEvaporation
					SumEvapCoeff
				InactiveCapacity
				LiveCapacity
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
				UBTargetStorage
			PowellSpringOutflowVolConstrained
				MaxReleaseVolume
					MaxRelease
				MinReleaseVolume
					MinRelease
				PowellMinObjRelVolumeSpring
					ComputeScheduledMinObjRelRemainingThruSept
					PowellMinObjRelVolRemaining
						AnnualMinObjectiveRelease
						ReleaseMade
							PowellFallRelease
				PowellSpringOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					UBTargetStorage
	ASSIGN TO $ "EqualizationData.ForecastEOWYSPowell" []
		EOWYStorage
			EstimateBankStorage
				EstimateEvaporation
					SumEvapCoeff
				LiveCapacity
			EstimateEvaporation
				SumEvapCoeff
			InactiveCapacity
			InitialEOWYStorageMead
				PreviousStorage
			InitialEOWYStoragePowell
				ForecastPowellInflow
					PowellRegulatedInflowVolume
						PowellNaturalInflowVolume
						UBDepletionsRange
						UBRegulation
							UBDrawDown
								UBInitialStorage
									UBTargetStorage
								UBTargetStorage
				PreviousStorage
			LiveCapacity
			PreviousStorage
		ForecastMeadRelease
			ComputeEqualizationEvaporation
				EstimateEvaporation
					SumEvapCoeff
				RuleCurveStorage
			EqualizationRuleCurveStorage
				PreviousStorage
				RuleCurveStorage
			SumDemandsDownstreamofMead
				SumDepletionsBelowVolume
				TotalOtherPriority4ActualUse
				TotalPriority2and3ActualUse
			SumInflowBelowMead
		ForecastPowellRelease
			ForecastPowellFallRangeOutflowVolume
				MaxReleaseVolume
					MaxRelease
				MinReleaseVolume
					MinRelease
				PowellFallOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					PowellRegulatedInflowVolume
						PowellNaturalInflowVolume
						UBDepletionsRange
						UBRegulation
							UBDrawDown
								UBInitialStorage
									UBTargetStorage
								UBTargetStorage
					UBTargetStorage
				PowellMinObjRelVolumeFall
					ComputeScheduledMinObjRelRemainingThruSept
					PowellMinObjRelVolRemaining
						AnnualMinObjectiveRelease
						ReleaseMade
							PowellFallRelease
				PowellSumReleaseWeights
			ForecastPowellJulyStorage
				Estimate Bank Storage without Evap
				EstimateEvaporation
					SumEvapCoeff
				InactiveCapacity
				LiveCapacity
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
				UBTargetStorage
			PowellSpringOutflowVolConstrained
				MaxReleaseVolume
					MaxRelease
				MinReleaseVolume
					MinRelease
				PowellMinObjRelVolumeSpring
					ComputeScheduledMinObjRelRemainingThruSept
					PowellMinObjRelVolRemaining
						AnnualMinObjectiveRelease
						ReleaseMade
							PowellFallRelease
				PowellSpringOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					UBTargetStorage
					
## 6 - Estimate Upper Basin Storage
	ASSIGN TO $ "EqualizationData.AvailableWater" []
		SumUpperBasinStorage
			PreviousStorage
## 7 - Sum Powell Inflow Spring
	FOREACH date IN @"24:00:00 January 31, Current Year" TO @"24:00:00 July 31, Current Year"
		ASSIGN TO $ "PowellForecastData.Powell Inflow Volume" [date]
## 8 - Sum Powell Inflow Fall
	FOREACH date IN @"24:00:00 August 31, Current Year" TO @"24:00:00 December 31, Current Year"
		ASSIGN TO $ "PowellForecastData.Powell Inflow Volume" [date]
## 9 - Powell Spike Flow Rule
	ASSIGN TO $ "Powell Spike Flow Data.Spike Flow Flag" []
		CheckSpikeFlowCriteria
			PowellSpringOutflowAverage
				PowellSpringOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					UBTargetStorage
	ASSIGN TO $ "Powell.Bypass" []
		CheckSpikeFlowCriteria
			PowellSpringOutflowAverage
				PowellSpringOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					UBTargetStorage
	ASSIGN TO $ "Powell.Storage" []
		CheckSpikeFlowCriteria
			PowellSpringOutflowAverage
				PowellSpringOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					UBTargetStorage
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
		PowellMinSpikeFlowOutflow
	SpikeAlreadyMade
	
## 10 - Equalization Post Guidelines
	ASSIGN TO "Powell.Storage" []
		602aStorageValue
		CheckEqualizationRelease602a
			602aStorageValue
		ComputeEqualizationReleaseList
			ComputeNewPowellRelease
				CheckEqualizationRelease
					CheckERMeadExclusiveFCS
						LiveCapacity
					EstimateEqualizationRelease
					GetListElement
				TotalPowellRelease
					EstimateEqualizationRelease
					GetListElement
			EOWYStorage
				EstimateBankStorage
					EstimateEvaporation
						SumEvapCoeff
					LiveCapacity
				EstimateEvaporation
					SumEvapCoeff
				InactiveCapacity
				InitialEOWYStorageMead
					PreviousStorage
				InitialEOWYStoragePowell
					ForecastPowellInflow
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
					PreviousStorage
				LiveCapacity
				PreviousStorage
			ForecastMeadRelease
				ComputeEqualizationEvaporation
					EstimateEvaporation
						SumEvapCoeff
					RuleCurveStorage
				EqualizationRuleCurveStorage
					PreviousStorage
					RuleCurveStorage
				SumDemandsDownstreamofMead
					SumDepletionsBelowVolume
					TotalOtherPriority4ActualUse
					TotalPriority2and3ActualUse
				SumInflowBelowMead
			GetListElement
			InitialEqualizationReleaseList
				ForecastPowellRelease
					ForecastPowellFallRangeOutflowVolume
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellFallOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							PowellRegulatedInflowVolume
								PowellNaturalInflowVolume
								UBDepletionsRange
								UBRegulation
									UBDrawDown
										UBInitialStorage
											UBTargetStorage
										UBTargetStorage
							UBTargetStorage
						PowellMinObjRelVolumeFall
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSumReleaseWeights
					ForecastPowellJulyStorage
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						InactiveCapacity
						LiveCapacity
						PowellSpringOutflowVolConstrained
							MaxReleaseVolume
								MaxRelease
							MinReleaseVolume
								MinRelease
							PowellMinObjRelVolumeSpring
								ComputeScheduledMinObjRelRemainingThruSept
								PowellMinObjRelVolRemaining
									AnnualMinObjectiveRelease
									ReleaseMade
										PowellFallRelease
							PowellSpringOutflowVolume
								Estimate Bank Storage without Evap
								EstimateEvaporation
									SumEvapCoeff
								UBTargetStorage
						UBTargetStorage
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
			TotalPowellRelease
				EstimateEqualizationRelease
				GetListElement
		ComputePowellRelease
			MinRelease
			NumberMonthsRemaining
		ConvertPowellRelease
			ForecastPowellRelease
				ForecastPowellFallRangeOutflowVolume
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellFallOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
						UBTargetStorage
					PowellMinObjRelVolumeFall
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSumReleaseWeights
				ForecastPowellJulyStorage
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					InactiveCapacity
					LiveCapacity
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
					UBTargetStorage
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
			GetListElement
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
		WaterAvailableInUpperBasin
	ASSIGN TO $ "EqualizationData.EqualFlag" []
		602aStorageValue
		WaterAvailableInUpperBasin
		
## 11 - Equalization Tier
	ASSIGN TO "Powell.Storage" []
		CheckEqualizationRelease_Mead1105
		ComputeEqualizationReleaseList
			ComputeNewPowellRelease
				CheckEqualizationRelease
					CheckERMeadExclusiveFCS
						LiveCapacity
					EstimateEqualizationRelease
					GetListElement
				TotalPowellRelease
					EstimateEqualizationRelease
					GetListElement
			EOWYStorage
				EstimateBankStorage
					EstimateEvaporation
						SumEvapCoeff
					LiveCapacity
				EstimateEvaporation
					SumEvapCoeff
				InactiveCapacity
				InitialEOWYStorageMead
					PreviousStorage
				InitialEOWYStoragePowell
					ForecastPowellInflow
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
					PreviousStorage
				LiveCapacity
				PreviousStorage
			ForecastMeadRelease
				ComputeEqualizationEvaporation
					EstimateEvaporation
						SumEvapCoeff
					RuleCurveStorage
				EqualizationRuleCurveStorage
					PreviousStorage
					RuleCurveStorage
				SumDemandsDownstreamofMead
					SumDepletionsBelowVolume
					TotalOtherPriority4ActualUse
					TotalPriority2and3ActualUse
				SumInflowBelowMead
			GetListElement
			InitialEqualizationReleaseList
				ForecastPowellRelease
					ForecastPowellFallRangeOutflowVolume
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellFallOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							PowellRegulatedInflowVolume
								PowellNaturalInflowVolume
								UBDepletionsRange
								UBRegulation
									UBDrawDown
										UBInitialStorage
											UBTargetStorage
										UBTargetStorage
							UBTargetStorage
						PowellMinObjRelVolumeFall
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSumReleaseWeights
					ForecastPowellJulyStorage
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						InactiveCapacity
						LiveCapacity
						PowellSpringOutflowVolConstrained
							MaxReleaseVolume
								MaxRelease
							MinReleaseVolume
								MinRelease
							PowellMinObjRelVolumeSpring
								ComputeScheduledMinObjRelRemainingThruSept
								PowellMinObjRelVolRemaining
									AnnualMinObjectiveRelease
									ReleaseMade
										PowellFallRelease
							PowellSpringOutflowVolume
								Estimate Bank Storage without Evap
								EstimateEvaporation
									SumEvapCoeff
								UBTargetStorage
						UBTargetStorage
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
			TotalPowellRelease
				EstimateEqualizationRelease
				GetListElement
		ComputePowellRelease
			MinRelease
			NumberMonthsRemaining
		ConvertPowellRelease
			ForecastPowellRelease
				ForecastPowellFallRangeOutflowVolume
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellFallOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
						UBTargetStorage
					PowellMinObjRelVolumeFall
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSumReleaseWeights
				ForecastPowellJulyStorage
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					InactiveCapacity
					LiveCapacity
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
					UBTargetStorage
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
			GetListElement
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
	ASSIGN TO $ "EqualizationData.EqualBasinStatesFlag" []
	
## 12 - Upper Elevation Balancing Tier Jan thru March
	ASSIGN TO $ "Coordinated Operation.UpperLevelBalancingFlag" []
		InUpperElevationBalancingTier
	ASSIGN TO $ "Powell.Storage" []
		ComputeEqualizationReleaseList
			ComputeNewPowellRelease
				CheckEqualizationRelease
					CheckERMeadExclusiveFCS
						LiveCapacity
					EstimateEqualizationRelease
					GetListElement
				TotalPowellRelease
					EstimateEqualizationRelease
					GetListElement
			EOWYStorage
				EstimateBankStorage
					EstimateEvaporation
						SumEvapCoeff
					LiveCapacity
				EstimateEvaporation
					SumEvapCoeff
				InactiveCapacity
				InitialEOWYStorageMead
					PreviousStorage
				InitialEOWYStoragePowell
					ForecastPowellInflow
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
					PreviousStorage
				LiveCapacity
				PreviousStorage
			ForecastMeadRelease
				ComputeEqualizationEvaporation
					EstimateEvaporation
						SumEvapCoeff
					RuleCurveStorage
				EqualizationRuleCurveStorage
					PreviousStorage
					RuleCurveStorage
				SumDemandsDownstreamofMead
					SumDepletionsBelowVolume
					TotalOtherPriority4ActualUse
					TotalPriority2and3ActualUse
				SumInflowBelowMead
			GetListElement
			InitialEqualizationReleaseList
				ForecastPowellRelease
					ForecastPowellFallRangeOutflowVolume
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellFallOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							PowellRegulatedInflowVolume
								PowellNaturalInflowVolume
								UBDepletionsRange
								UBRegulation
									UBDrawDown
										UBInitialStorage
											UBTargetStorage
										UBTargetStorage
							UBTargetStorage
						PowellMinObjRelVolumeFall
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSumReleaseWeights
					ForecastPowellJulyStorage
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						InactiveCapacity
						LiveCapacity
						PowellSpringOutflowVolConstrained
							MaxReleaseVolume
								MaxRelease
							MinReleaseVolume
								MinRelease
							PowellMinObjRelVolumeSpring
								ComputeScheduledMinObjRelRemainingThruSept
								PowellMinObjRelVolRemaining
									AnnualMinObjectiveRelease
									ReleaseMade
										PowellFallRelease
							PowellSpringOutflowVolume
								Estimate Bank Storage without Evap
								EstimateEvaporation
									SumEvapCoeff
								UBTargetStorage
						UBTargetStorage
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
			TotalPowellRelease
				EstimateEqualizationRelease
				GetListElement
		ComputePowellReleaseUpperBalancing
			NumberMonthsRemaining
			PowellReducedRelforCurrentMonth
				ComputeReducedReleaseRemaining
					AnnualReducedRelease
				MinRelease
				PowellReducedRelVolRemaining
					AnnualReducedRelease
					ReleaseMade
						PowellFallRelease
		ConvertPowellReleaseBalancing
			ForecastPowellRelease
				ForecastPowellFallRangeOutflowVolume
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellFallOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
						UBTargetStorage
					PowellMinObjRelVolumeFall
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSumReleaseWeights
				ForecastPowellJulyStorage
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					InactiveCapacity
					LiveCapacity
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
					UBTargetStorage
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
			GetListElement
		InUpperElevationBalancingTier
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
			
## 13 - Upper Elevation Balancing Tier April thru Sept
	ASSIGN TO $ "Coordinated Operation.EQTrumpUpperLevelBalancing1105GovFlag" []
		EqualizationConditionsMet
		InUpperElevationBalancingTier
	ASSIGN TO $ "Coordinated Operation.EQTrumpUpperLevelBalancingFlag" []
		EqualizationConditionsMet
		InUpperElevationBalancingTier
	ASSIGN TO $ "Coordinated Operation.UpperLevelBalancingFlag" []
		EqualizationConditionsMet
		InUpperElevationBalancingTier
	ASSIGN TO $ "Powell.Storage" []
		CheckEqualizationRelease_Mead1105
		ComputeEqualizationReleaseList
			ComputeNewPowellRelease
				CheckEqualizationRelease
					CheckERMeadExclusiveFCS
						LiveCapacity
					EstimateEqualizationRelease
					GetListElement
				TotalPowellRelease
					EstimateEqualizationRelease
					GetListElement
			EOWYStorage
				EstimateBankStorage
					EstimateEvaporation
						SumEvapCoeff
					LiveCapacity
				EstimateEvaporation
					SumEvapCoeff
				InactiveCapacity
				InitialEOWYStorageMead
					PreviousStorage
				InitialEOWYStoragePowell
					ForecastPowellInflow
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
					PreviousStorage
				LiveCapacity
				PreviousStorage
			ForecastMeadRelease
				ComputeEqualizationEvaporation
					EstimateEvaporation
						SumEvapCoeff
					RuleCurveStorage
				EqualizationRuleCurveStorage
					PreviousStorage
					RuleCurveStorage
				SumDemandsDownstreamofMead
					SumDepletionsBelowVolume
					TotalOtherPriority4ActualUse
					TotalPriority2and3ActualUse
				SumInflowBelowMead
			GetListElement
			InitialEqualizationReleaseList
				ForecastPowellRelease
					ForecastPowellFallRangeOutflowVolume
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellFallOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							PowellRegulatedInflowVolume
								PowellNaturalInflowVolume
								UBDepletionsRange
								UBRegulation
									UBDrawDown
										UBInitialStorage
											UBTargetStorage
										UBTargetStorage
							UBTargetStorage
						PowellMinObjRelVolumeFall
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSumReleaseWeights
					ForecastPowellJulyStorage
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						InactiveCapacity
						LiveCapacity
						PowellSpringOutflowVolConstrained
							MaxReleaseVolume
								MaxRelease
							MinReleaseVolume
								MinRelease
							PowellMinObjRelVolumeSpring
								ComputeScheduledMinObjRelRemainingThruSept
								PowellMinObjRelVolRemaining
									AnnualMinObjectiveRelease
									ReleaseMade
										PowellFallRelease
							PowellSpringOutflowVolume
								Estimate Bank Storage without Evap
								EstimateEvaporation
									SumEvapCoeff
								UBTargetStorage
						UBTargetStorage
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
			TotalPowellRelease
				EstimateEqualizationRelease
				GetListElement
		ComputePowellRelease
			MinRelease
			NumberMonthsRemaining
		ComputePowellReleaseUpperBalancing
			NumberMonthsRemaining
			PowellReducedRelforCurrentMonth
				ComputeReducedReleaseRemaining
					AnnualReducedRelease
				MinRelease
				PowellReducedRelVolRemaining
					AnnualReducedRelease
					ReleaseMade
						PowellFallRelease
		ConvertPowellRelease
			ForecastPowellRelease
				ForecastPowellFallRangeOutflowVolume
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellFallOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
						UBTargetStorage
					PowellMinObjRelVolumeFall
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSumReleaseWeights
				ForecastPowellJulyStorage
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					InactiveCapacity
					LiveCapacity
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
					UBTargetStorage
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
			GetListElement
		ConvertPowellReleaseBalancing
			ForecastPowellRelease
				ForecastPowellFallRangeOutflowVolume
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellFallOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
						UBTargetStorage
					PowellMinObjRelVolumeFall
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSumReleaseWeights
				ForecastPowellJulyStorage
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					InactiveCapacity
					LiveCapacity
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
					UBTargetStorage
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
			GetListElement
		EqualizationConditionsMet
		InUpperElevationBalancingTier
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
## 14 - Mid Elevation Release Tier
	ASSIGN TO $ "Coordinated Operation.ReducedReleaseFlag" []
		InMidElevationReleaseTier
	ASSIGN TO $ "Powell.Storage" []
		InMidElevationReleaseTier
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
		PowellReducedRelforCurrentMonth
			ComputeReducedReleaseRemaining
				AnnualReducedRelease
			MinRelease
			PowellReducedRelVolRemaining
				AnnualReducedRelease
				ReleaseMade
					PowellFallRelease
					
## 15 - Lower Elevation Balancing Tier
	ASSIGN TO $ "Coordinated Operation.LowerLevelBalancingFlag" []
		InLowerElevationBalancingTier
	ASSIGN TO $ "Powell.Storage" []
		ComputeEqualizationReleaseList
			ComputeNewPowellRelease
				CheckEqualizationRelease
					CheckERMeadExclusiveFCS
						LiveCapacity
					EstimateEqualizationRelease
					GetListElement
				TotalPowellRelease
					EstimateEqualizationRelease
					GetListElement
			EOWYStorage
				EstimateBankStorage
					EstimateEvaporation
						SumEvapCoeff
					LiveCapacity
				EstimateEvaporation
					SumEvapCoeff
				InactiveCapacity
				InitialEOWYStorageMead
					PreviousStorage
				InitialEOWYStoragePowell
					ForecastPowellInflow
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
					PreviousStorage
				LiveCapacity
				PreviousStorage
			ForecastMeadRelease
				ComputeEqualizationEvaporation
					EstimateEvaporation
						SumEvapCoeff
					RuleCurveStorage
				EqualizationRuleCurveStorage
					PreviousStorage
					RuleCurveStorage
				SumDemandsDownstreamofMead
					SumDepletionsBelowVolume
					TotalOtherPriority4ActualUse
					TotalPriority2and3ActualUse
				SumInflowBelowMead
			GetListElement
			InitialEqualizationReleaseList
				ForecastPowellRelease
					ForecastPowellFallRangeOutflowVolume
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellFallOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							PowellRegulatedInflowVolume
								PowellNaturalInflowVolume
								UBDepletionsRange
								UBRegulation
									UBDrawDown
										UBInitialStorage
											UBTargetStorage
										UBTargetStorage
							UBTargetStorage
						PowellMinObjRelVolumeFall
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSumReleaseWeights
					ForecastPowellJulyStorage
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						InactiveCapacity
						LiveCapacity
						PowellSpringOutflowVolConstrained
							MaxReleaseVolume
								MaxRelease
							MinReleaseVolume
								MinRelease
							PowellMinObjRelVolumeSpring
								ComputeScheduledMinObjRelRemainingThruSept
								PowellMinObjRelVolRemaining
									AnnualMinObjectiveRelease
									ReleaseMade
										PowellFallRelease
							PowellSpringOutflowVolume
								Estimate Bank Storage without Evap
								EstimateEvaporation
									SumEvapCoeff
								UBTargetStorage
						UBTargetStorage
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
			TotalPowellRelease
				EstimateEqualizationRelease
				GetListElement
		ComputePowellReleaseLowerBalancing
			NumberMonthsRemaining
			PowellReducedRelforCurrentMonth
				ComputeReducedReleaseRemaining
					AnnualReducedRelease
				MinRelease
				PowellReducedRelVolRemaining
					AnnualReducedRelease
					ReleaseMade
						PowellFallRelease
		ConvertPowellReleaseBalancing
			ForecastPowellRelease
				ForecastPowellFallRangeOutflowVolume
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellFallOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						PowellRegulatedInflowVolume
							PowellNaturalInflowVolume
							UBDepletionsRange
							UBRegulation
								UBDrawDown
									UBInitialStorage
										UBTargetStorage
									UBTargetStorage
						UBTargetStorage
					PowellMinObjRelVolumeFall
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSumReleaseWeights
				ForecastPowellJulyStorage
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					InactiveCapacity
					LiveCapacity
					PowellSpringOutflowVolConstrained
						MaxReleaseVolume
							MaxRelease
						MinReleaseVolume
							MinRelease
						PowellMinObjRelVolumeSpring
							ComputeScheduledMinObjRelRemainingThruSept
							PowellMinObjRelVolRemaining
								AnnualMinObjectiveRelease
								ReleaseMade
									PowellFallRelease
						PowellSpringOutflowVolume
							Estimate Bank Storage without Evap
							EstimateEvaporation
								SumEvapCoeff
							UBTargetStorage
					UBTargetStorage
				PowellSpringOutflowVolConstrained
					MaxReleaseVolume
						MaxRelease
					MinReleaseVolume
						MinRelease
					PowellMinObjRelVolumeSpring
						ComputeScheduledMinObjRelRemainingThruSept
						PowellMinObjRelVolRemaining
							AnnualMinObjectiveRelease
							ReleaseMade
								PowellFallRelease
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
			GetListElement
		InLowerElevationBalancingTier
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
			
## 16 - Check Bypass Capacity
	ASSIGN TO $ "EqualizationData.BypassCapFlag" []
		BypassCapacity
		InactiveCapacity
	ASSIGN TO $ "Powell.Storage" []
		BypassCapacity
		InactiveCapacity
		IterateBypassCapacity
			BypassCapacity
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage

## 17 - Powell Limit Outflow Rule
	ASSIGN TO $ "Powell.Storage" []
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
			
## 18 - Powell Smooth July Operation Rule
	ASSIGN TO $ "Powell.Storage" []
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
			
## 19 - Meet Powell Min Objective Release
	ASSIGN TO "Powell.Storage" []
		PowellComputeStorageAtGivenOutflow
			LiveCapacity
			PreviousStorage
		PowellMinObjRelforCurrentMonth
			ComputeMinObjReleaseRemaining
				AnnualMinObjectiveRelease
			MinRelease
			PowellMinObjRelVolRemaining
				AnnualMinObjectiveRelease
				ReleaseMade
					PowellFallRelease
	ASSIGN TO $ "EqualizationData.MinObjRelFlag" []
		PowellMinObjRelforCurrentMonth
			ComputeMinObjReleaseRemaining
				AnnualMinObjectiveRelease
			MinRelease
			PowellMinObjRelVolRemaining
				AnnualMinObjectiveRelease
				ReleaseMade
					PowellFallRelease
					
## 20 - Powell Operations Rule
	ASSIGN TO $ "Powell.Storage" []
		PowellFallSeasonStorage
			InactiveCapacity
			LiveCapacity
			PowellComputeFallSeasonRelease
				MaxRelease
				MinRelease
				PowellFallOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					PowellRegulatedInflowVolume
						PowellNaturalInflowVolume
						UBDepletionsRange
						UBRegulation
							UBDrawDown
								UBInitialStorage
									UBTargetStorage
								UBTargetStorage
					UBTargetStorage
				PowellReleaseFraction
			PowellComputeStorageAtGivenOutflow
				LiveCapacity
				PreviousStorage
		PowellRunoffSeasonStorage
			InactiveCapacity
			LiveCapacity
			PowellComputeRunoffSeasonRelease
				MaxRelease
				MinRelease
				PowellReleaseFraction
				PowellSpringOutflowAverage
					PowellSpringOutflowVolume
						Estimate Bank Storage without Evap
						EstimateEvaporation
							SumEvapCoeff
						UBTargetStorage
				PowellSpringOutflowVolume
					Estimate Bank Storage without Evap
					EstimateEvaporation
						SumEvapCoeff
					UBTargetStorage
			PowellComputeStorageAtGivenOutflow
				LiveCapacity
				PreviousStorage
